<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>RENCE CREATE | Gallery</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link href="https://fonts.googleapis.com/css2?family=Unbounded:wght@400;700;900&family=Fraunces:ital,opsz,wght@0,9..144,700;1,9..144,400&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg:            #f4f4f4;
            --black:         #000000;
            --accent:        #00ff66;
            --white:         #ffffff;
            --grey:          #e0e0e0;
            --text-muted:    #555555;
            --border:        3px solid var(--black);
            --shadow-sm:     6px 6px 0px var(--black);
            --shadow-accent: 8px 8px 0px var(--accent);
            --ease:          cubic-bezier(0.175, 0.885, 0.32, 1.275);
            --transition:    all 0.25s var(--ease);
            --danger:        #e00000;
        }

        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

        /* body = flex column so footer always sticks to bottom */
        body {
            font-family: 'Unbounded', sans-serif;
            background: var(--bg);
            color: var(--black);
            overflow-x: hidden;
            line-height: 1.5;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .hidden { display: none !important; }

        /* â”€â”€ Global buttons â”€â”€ */
        button {
            font-family: 'Unbounded', sans-serif;
            font-weight: 900;
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            background: var(--black);
            color: var(--white);
            border: none;
            padding: 12px 22px;
            cursor: pointer;
            transition: var(--transition);
        }
        button:hover { background: var(--accent); color: var(--black); transform: translate(-2px,-2px); box-shadow: 4px 4px 0 var(--black); }
        button.btn-ghost { background: var(--grey); color: #444; }
        button.btn-ghost:hover { background: var(--grey); color: var(--black); box-shadow: 3px 3px 0 var(--black); }
        button.btn-danger { background: var(--danger); color: var(--white); }

        input, textarea, select {
            width: 100%;
            padding: 11px 14px;
            border: 2px solid var(--black);
            border-radius: 0;
            background: var(--white);
            font-family: 'Unbounded', sans-serif;
            font-size: 0.7rem;
            color: var(--black);
            margin-bottom: 10px;
            transition: box-shadow 0.2s;
        }
        input:focus, textarea:focus, select:focus { outline: none; box-shadow: 4px 4px 0 var(--accent); }

        /* â”€â”€ Toast â”€â”€ */
        #g-alert {
            position: fixed; bottom: 32px; right: 24px;
            background: var(--black); color: var(--white);
            padding: 14px 22px; border: 2px solid var(--accent);
            display: flex; align-items: center; gap: 12px;
            font-size: 0.7rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px;
            transform: translateY(calc(100% + 60px)); opacity: 0; pointer-events: none;
            transition: transform 0.45s var(--ease), opacity 0.45s ease;
            z-index: 9999; box-shadow: 5px 5px 0 var(--accent); max-width: 320px;
        }
        #g-alert.show { transform: translateY(0); opacity: 1; pointer-events: auto; }

        /* â”€â”€ Modal overlay â”€â”€ */
        .modal-overlay {
            position: fixed; inset: 0;
            background: rgba(0,0,0,0.87);
            backdrop-filter: blur(6px); -webkit-backdrop-filter: blur(6px);
            display: flex; align-items: center; justify-content: center;
            z-index: 1000; padding: 20px;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           ROW 1 â”€â”€ COVER PHOTO (full-bleed, no header bar)
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .profile-banner {
            width: 100%;
            height: 360px;   /* maximised â€” header bar removed */
            background: var(--black);
            position: relative;
            overflow: visible;   /* allow avatar to visually overlap */
            flex-shrink: 0;
            z-index: 0;
        }

        .profile-banner > img {
            width: 100%; height: 100%;
            object-fit: cover; display: block;
            position: absolute; inset: 0;
        }

        .profile-banner-placeholder {
            width: 100%; height: 100%;
            background: linear-gradient(135deg, #111 0%, #1a1a1a 50%, #000 100%);
            display: flex; align-items: center; justify-content: center;
            position: absolute; inset: 0;
        }

        .profile-banner-placeholder span {
            font-family: 'Fraunces', serif; font-style: italic;
            font-size: clamp(2.5rem, 8vw, 5.5rem);
            font-weight: 700; color: var(--accent); opacity: 0.11; letter-spacing: -2px;
        }

        /* â”€â”€ Back to Shop â”€â”€ bottom-RIGHT of cover */
        .banner-back-btn {
            position: absolute; bottom: 16px; right: 16px; z-index: 10;
            font-family: 'Unbounded', sans-serif; font-weight: 900;
            font-size: 0.6rem; text-transform: uppercase; letter-spacing: 1px;
            color: var(--white); text-decoration: none;
            background: rgba(0,0,0,0.60); border: 2px solid rgba(255,255,255,0.35);
            padding: 10px 18px; display: inline-flex; align-items: center; gap: 6px;
            backdrop-filter: blur(6px);
            transition: var(--transition);
        }
        .banner-back-btn:hover {
            background: var(--accent); color: var(--black);
            border-color: var(--accent); transform: translateY(-2px);
            box-shadow: 4px 4px 0 var(--black);
        }

        /* â”€â”€ Admin: Edit Gallery â”€â”€ bottom-LEFT of cover */
        .banner-edit-btn {
            position: absolute; bottom: 16px; left: 16px; z-index: 10;
            background: rgba(0,0,0,0.65); color: var(--accent);
            border: 2px solid var(--accent); padding: 9px 16px;
            font-size: 0.6rem; letter-spacing: 1px; cursor: pointer;
            backdrop-filter: blur(4px); transition: var(--transition);
        }
        .banner-edit-btn:hover {
            background: var(--accent); color: var(--black);
            transform: translateY(-2px); box-shadow: 4px 4px 0 var(--black);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           PROFILE META (avatar + name + bio + stats + socials)
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .profile-meta-row {
            max-width: 900px; width: 100%;
            margin: 0 auto; padding: 0 28px 32px;
            position: relative;
            z-index: 1;   /* sits above the banner */
        }

        /* Square avatar â€” raised above cover via transform */
        .profile-avatar-wrap {
            display: inline-block;
            transform: translateY(-58px);  /* visually overlaps bottom of cover */
            margin-bottom: -42px;          /* pulls following content back up */
        }

        .profile-avatar, .profile-avatar-placeholder {
            width: 112px; height: 112px;
            border-radius: 0;                    /* SQUARE */
            border: 4px solid var(--bg);
            outline: 3px solid var(--black);
            object-fit: cover; display: block;
            background: var(--grey);
        }
        .profile-avatar-placeholder {
            display: flex; align-items: center; justify-content: center; font-size: 2.5rem;
        }

        /* Name â€” Unbounded font */
        .profile-name {
            font-family: 'Unbounded', sans-serif;
            font-weight: 900;
            font-size: clamp(1.15rem, 3.5vw, 2rem);
            letter-spacing: -0.5px;
            line-height: 1.15;
            margin-bottom: 8px;
        }

        .profile-bio {
            font-size: 0.72rem; color: var(--text-muted);
            line-height: 1.8; max-width: 560px; margin-bottom: 20px;
        }

        /* Bottom row: stats + socials */
        .profile-bottom-row {
            display: flex; align-items: center;
            justify-content: space-between;
            flex-wrap: wrap; gap: 16px;
        }

        .profile-stats { display: flex; gap: 28px; align-items: center; }

        .stat-item { display: flex; flex-direction: column; gap: 2px; }
        .stat-label {
            font-size: 0.52rem; font-weight: 900; text-transform: uppercase;
            letter-spacing: 1.5px; color: var(--text-muted);
        }
        .stat-value {
            font-family: 'Unbounded', sans-serif;
            font-size: 1.05rem; font-weight: 900; line-height: 1;
            display: flex; align-items: center; gap: 5px;
        }
        .stat-heart { color: #e0002a; font-size: 1rem; }

        /* Social icons */
        .social-icons { display: flex; gap: 8px; align-items: center; }

        .social-icon {
            width: 38px; height: 38px;
            display: flex; align-items: center; justify-content: center;
            background: var(--black); color: var(--white);
            border: 2px solid var(--black);
            text-decoration: none;
            transition: var(--transition); flex-shrink: 0;
        }
        .social-icon svg { width: 16px; height: 16px; fill: currentColor; display: block; }
        .social-icon:hover { transform: translateY(-3px); box-shadow: 3px 3px 0 var(--black); }
        .social-icon.fb:hover { background: #1877f2; border-color: #1877f2; color: #fff; }
        .social-icon.ig:hover { background: #e1306c; border-color: #e1306c; color: #fff; }
        .social-icon.tw:hover { background: #000; border-color: #555; color: #fff; }
        .social-icon.tk:hover { background: #010101; border-color: #69c9d0; color: #fff; }

        .profile-divider { border: none; border-top: var(--border); max-width: 900px; margin: 0 auto; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           ROW 2 â”€â”€ INSTAGRAM GRID
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .gallery-wrap {
            max-width: 900px; width: 100%;
            margin: 0 auto; padding: 28px 0 40px;
            flex: 1;   /* fills remaining height so footer stays at bottom */
        }

        .gallery-grid { display: grid; grid-template-columns: repeat(3,1fr); gap: 3px; }

        .gallery-cell {
            position: relative; aspect-ratio: 1/1;
            overflow: hidden; background: var(--grey); cursor: pointer;
        }
        .gallery-cell img { width: 100%; height: 100%; object-fit: cover; display: block; transition: transform 0.4s ease; }
        .gallery-cell-overlay {
            position: absolute; inset: 0; background: rgba(0,0,0,0.72);
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            opacity: 0; transition: opacity 0.3s ease; padding: 12px; text-align: center;
        }
        .gallery-cell:hover .gallery-cell-overlay { opacity: 1; }
        .gallery-cell:hover img { transform: scale(1.08); }
        .cell-title { font-family: 'Fraunces',serif; font-style: italic; font-size: 1rem; color: var(--white); font-weight: 700; }
        .cell-hint  { font-size: 0.55rem; color: var(--accent); font-weight: 900; text-transform: uppercase; letter-spacing: 2px; margin-top: 6px; }

        .cell-del-btn {
            position: absolute; top: 6px; right: 6px;
            width: 28px; height: 28px; background: var(--danger); color: var(--white);
            border: none; font-size: 0.85rem; font-weight: 900; cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            z-index: 10; padding: 0; opacity: 0; transition: opacity 0.2s;
        }
        .gallery-cell:hover .cell-del-btn { opacity: 1; }
        .cell-del-btn:hover { background: #c00; transform: scale(1.1); box-shadow: none; }

        .gallery-empty { grid-column: 1/-1; text-align: center; padding: 80px 20px; }
        .gallery-empty h2 { font-family: 'Fraunces',serif; font-style:italic; font-size: 2rem; color: var(--text-muted); margin-bottom: 8px; }
        .gallery-empty p  { font-size: 0.65rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 2px; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           ART MODAL â”€â”€ Side-by-Side / Stacked
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .art-modal-card {
            background: var(--white); border: var(--border);
            width: 100%; max-width: 960px; max-height: 90vh;
            overflow: hidden; box-shadow: var(--shadow-accent);
            position: relative; display: flex; flex-direction: row;
        }
        .art-modal-img-pane { flex: 0 0 62%; max-height: 90vh; overflow: hidden; border-right: var(--border); }
        .art-modal-img { width: 100%; height: 100%; object-fit: cover; display: block; }
        .art-modal-info-pane {
            flex: 1; display: flex; flex-direction: column; justify-content: center;
            padding: 40px 32px; overflow-y: auto; max-height: 90vh;
        }
        .art-modal-close {
            position: absolute; top: 12px; right: 12px;
            width: 36px; height: 36px; background: var(--black); color: var(--white);
            border: none; font-size: 1rem; font-weight: 900; cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            z-index: 10; padding: 0; transition: background 0.15s;
        }
        .art-modal-close:hover { background: var(--accent); color: var(--black); transform: none; box-shadow: none; }
        .art-modal-label {
            font-size: 0.55rem; font-weight: 900; text-transform: uppercase;
            letter-spacing: 3px; color: var(--accent); background: var(--black);
            display: inline-block; padding: 4px 10px; margin-bottom: 18px;
        }
        .art-modal-title {
            font-family: 'Fraunces',serif; font-style: italic;
            font-size: clamp(1.4rem, 3vw, 2rem); font-weight: 700; margin-bottom: 14px; line-height: 1.2;
        }
        .art-modal-desc { font-size: 0.75rem; color: var(--text-muted); line-height: 1.9; }

        @media (max-width: 700px) {
            .art-modal-card { flex-direction: column; max-height: 92vh; overflow-y: auto; max-width: 100%; }
            .art-modal-img-pane { flex: 0 0 auto; max-height: 52vw; border-right: none; border-bottom: var(--border); }
            .art-modal-img { height: 52vw; min-height: 220px; }
            .art-modal-info-pane { padding: 24px 20px; max-height: none; justify-content: flex-start; }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           ADMIN DRAWER
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        #admin-drawer {
            position: fixed; bottom: 0; left: 0; right: 0; z-index: 800;
            background: var(--white); border-top: var(--border);
            box-shadow: 0 -8px 0 var(--black);
            transform: translateY(100%); transition: transform 0.4s var(--ease);
            max-height: 85vh; overflow-y: auto;
        }
        #admin-drawer.open { transform: translateY(0); }
        .drawer-inner { max-width: 860px; margin: 0 auto; padding: 32px 24px 40px; }
        .drawer-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 28px; padding-bottom: 16px; border-bottom: var(--border); }
        .drawer-header h2 { font-family: 'Fraunces',serif; font-style: italic; font-size: 1.6rem; font-weight: 700; }
        .drawer-tabs { display: flex; margin-bottom: 24px; border: 2px solid var(--black); width: fit-content; }
        .drawer-tab { font-family: 'Unbounded',sans-serif; font-weight: 900; font-size: 0.6rem; text-transform: uppercase; letter-spacing: 1px; padding: 10px 20px; background: transparent; color: var(--black); border: none; cursor: pointer; transition: background 0.15s; }
        .drawer-tab.active { background: var(--black); color: var(--accent); }
        .drawer-tab:hover:not(.active) { background: var(--grey); transform: none; box-shadow: none; color: var(--black); }
        .tab-panel { display: none; } .tab-panel.active { display: block; }
        .progress-wrap { height: 6px; background: var(--grey); border: 1px solid var(--black); margin-bottom: 10px; overflow: hidden; }
        .progress-bar { height: 100%; background: var(--accent); width: 0%; transition: width 0.3s ease; }
        .upload-preview { width: 100%; aspect-ratio: 1/1; border: var(--border); background: var(--bg); display: flex; align-items: center; justify-content: center; overflow: hidden; margin-bottom: 12px; }
        .upload-preview img { width: 100%; height: 100%; object-fit: cover; }
        .upload-preview .preview-label { font-size: 0.6rem; font-weight: 700; text-transform: uppercase; color: var(--text-muted); letter-spacing: 1px; }
        .avatar-preview-wrap { display: flex; align-items: center; gap: 20px; margin-bottom: 16px; }
        .avatar-preview { width: 80px; height: 80px; border: var(--border); background: var(--grey); object-fit: cover; flex-shrink: 0; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           ROW 3 â”€â”€ FOOTER
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        footer {
            background: var(--black); color: var(--white);
            padding: 40px;
            display: flex; justify-content: space-between; align-items: center;
            flex-wrap: wrap; gap: 20px;
            margin-top: auto;   /* pushes footer to bottom via flex-column on body */
        }
        .est-tag { font-family: 'Unbounded',sans-serif; font-weight: 900; font-size: clamp(1rem,4vw,1.5rem); line-height: 1.3; }
        .footer-copy { text-align: right; font-size: 0.6rem; opacity: 0.5; line-height: 2; font-weight: 400; letter-spacing: 1px; }

        /* â”€â”€ Responsive â”€â”€ */
        @media (max-width: 768px) {
            .profile-banner { height: 240px; }
            .profile-meta-row { padding: 0 16px 28px; }
            .profile-avatar, .profile-avatar-placeholder { width: 90px; height: 90px; }
            .profile-avatar-wrap { transform: translateY(-45px); margin-bottom: -30px; }
            .profile-bottom-row { flex-direction: column; align-items: flex-start; }
            .gallery-grid { gap: 2px; }
            footer { padding: 28px 20px; }
            .footer-copy { text-align: left; }
        }
        @media (max-width: 480px) {
            .gallery-grid { gap: 1px; }
            .profile-name { font-size: 1rem; }
            .social-icon { width: 34px; height: 34px; }
        }
    </style>
</head>
<body>

<!-- â”€â”€ Toast â”€â”€ -->
<div id="g-alert">
    <span id="g-alert-icon">âœ¨</span>
    <span id="g-alert-text">Done</span>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     ROW 1 â€” COVER PHOTO (full-bleed, no header bar)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="profile-banner" id="profile-banner">
    <img id="profile-banner-img" src="" alt="Cover photo" class="hidden">
    <div class="profile-banner-placeholder" id="profile-banner-placeholder">
        <span>RENCE CREATE</span>
    </div>

    <!-- Back to Shop button â€” bottom right of cover -->
    <a href="index.html" class="banner-back-btn">â† Back to Shop</a>

    <!-- Admin: Edit Gallery â€” bottom left of cover (hidden by default) -->
    <button class="banner-edit-btn hidden" id="edit-gallery-btn" onclick="openAdminDrawer()">
        âœ¦ Edit Gallery
    </button>

    <!-- Hidden file input for banner (triggered from drawer) -->
    <input type="file" id="banner-img-input" accept="image/*" class="hidden">
</div>

<!-- Profile Meta row -->
<div class="profile-meta-row">
    <!-- Square avatar overlapping cover -->
    <div class="profile-avatar-wrap">
        <div class="profile-avatar-placeholder" id="avatar-placeholder">ğŸ¨</div>
        <img id="profile-avatar-img" class="profile-avatar hidden" src="" alt="Profile">
    </div>

    <div class="profile-info">
        <!-- Name: Unbounded font -->
        <div class="profile-name" id="profile-name-display">Loading...</div>
        <p class="profile-bio" id="profile-bio-display"></p>

        <div class="profile-bottom-row">
            <!-- Stats: Posts + Likes -->
            <div class="profile-stats">
                <div class="stat-item">
                    <span class="stat-label">Posts</span>
                    <span class="stat-value" id="post-count">â€”</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Likes</span>
                    <span class="stat-value">
                        <span id="like-count">â€”</span>
                        <span class="stat-heart">â™¥</span>
                    </span>
                </div>
            </div>

            <!-- Social Media Icons -->
            <div class="social-icons">

                <!-- Facebook -->
                <a href="https://facebook.com/rencecreate" target="_blank" rel="noopener"
                   class="social-icon fb" title="Facebook">
                    <svg viewBox="0 0 24 24"><path d="M24 12.073C24 5.405 18.627 0 12 0S0 5.405 0 12.073C0 18.1 4.388 23.094 10.125 24v-8.437H7.078v-3.49h3.047V9.413c0-3.025 1.791-4.697 4.533-4.697 1.312 0 2.686.236 2.686.236v2.97h-1.513c-1.491 0-1.956.93-1.956 1.886v2.265h3.328l-.532 3.49h-2.796V24C19.612 23.094 24 18.1 24 12.073z"/></svg>
                </a>

                <!-- Instagram -->
                <a href="https://instagram.com/rencecreate" target="_blank" rel="noopener"
                   class="social-icon ig" title="Instagram">
                    <svg viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z"/></svg>
                </a>

                <!-- Twitter / X -->
                <a href="https://twitter.com/rencecreate" target="_blank" rel="noopener"
                   class="social-icon tw" title="Twitter / X">
                    <svg viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
                </a>

                <!-- TikTok -->
                <a href="https://tiktok.com/@rencecreate" target="_blank" rel="noopener"
                   class="social-icon tk" title="TikTok">
                    <svg viewBox="0 0 24 24"><path d="M19.59 6.69a4.83 4.83 0 01-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 01-2.88 2.5 2.89 2.89 0 01-2.89-2.89 2.89 2.89 0 012.89-2.89c.28 0 .54.04.79.1V9.01a6.33 6.33 0 00-.79-.05 6.34 6.34 0 00-6.34 6.34 6.34 6.34 0 006.34 6.34 6.34 6.34 0 006.33-6.34V8.69a8.18 8.18 0 004.78 1.52V6.78a4.85 4.85 0 01-1.01-.09z"/></svg>
                </a>
            </div>
        </div>
    </div>
</div>

<hr class="profile-divider">

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     ROW 2 â€” INSTAGRAM GRID
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="gallery-wrap">
    <div class="gallery-grid" id="gallery-grid">
        <div class="gallery-empty" style="grid-column:1/-1;padding:60px 0;text-align:center;">
            <p style="font-size:0.65rem;color:var(--text-muted);text-transform:uppercase;letter-spacing:2px;">Loading gallery...</p>
        </div>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     ART VIEW MODAL â€” side-by-side (desktop) / stacked (mobile)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="art-modal" class="modal-overlay hidden">
    <div class="art-modal-card">
        <button class="art-modal-close" onclick="closeArtModal()">âœ•</button>
        <div class="art-modal-img-pane">
            <img id="art-modal-img" class="art-modal-img" src="" alt="">
        </div>
        <div class="art-modal-info-pane">
            <div class="art-modal-label">âœ¦ Original Art</div>
            <div class="art-modal-title" id="art-modal-title"></div>
            <p class="art-modal-desc" id="art-modal-desc"></p>
        </div>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     ADMIN DRAWER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="admin-drawer">
    <div class="drawer-inner">
        <div class="drawer-header">
            <h2>Gallery Admin</h2>
            <button onclick="closeAdminDrawer()" class="btn-ghost">âœ• Close</button>
        </div>
        <div class="drawer-tabs">
            <button class="drawer-tab active" onclick="switchTab('tab-upload',event)">Upload Post</button>
            <button class="drawer-tab"        onclick="switchTab('tab-profile',event)">Edit Profile</button>
        </div>

        <!-- TAB: Upload Post -->
        <div class="tab-panel active" id="tab-upload">
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:24px;align-items:start;">
                <div>
                    <div class="upload-preview" id="post-preview"><span class="preview-label">Image Preview</span></div>
                    <input type="file" id="post-img-input" accept="image/*" style="font-size:0.62rem;margin-bottom:8px;">
                    <div class="progress-wrap hidden" id="post-progress-wrap"><div class="progress-bar" id="post-progress-bar"></div></div>
                    <p id="post-upload-status" class="hidden" style="font-size:0.55rem;color:var(--text-muted);margin:-4px 0 8px;">Uploading...</p>
                </div>
                <div>
                    <input type="text" id="post-title" placeholder="Art Title *">
                    <textarea id="post-desc" placeholder="Description, story, or notes..." style="height:120px;resize:vertical;"></textarea>
                    <button onclick="submitPost()" style="width:100%;padding:14px;">Publish to Gallery âœ¦</button>
                    <p style="font-size:0.55rem;color:var(--text-muted);margin-top:8px;line-height:1.6;">Image is uploaded to Supabase Storage and saved to the database.</p>
                </div>
            </div>
        </div>

        <!-- TAB: Edit Profile -->
        <div class="tab-panel" id="tab-profile">
            <div class="avatar-preview-wrap">
                <img id="avatar-edit-preview" class="avatar-preview" src="" alt="" style="display:none;">
                <div id="avatar-edit-placeholder" style="width:80px;height:80px;border:var(--border);background:var(--grey);display:flex;align-items:center;justify-content:center;font-size:1.5rem;flex-shrink:0;">ğŸ¨</div>
                <div style="flex:1;">
                    <p style="font-size:0.58rem;font-weight:700;text-transform:uppercase;letter-spacing:1.5px;color:var(--text-muted);margin-bottom:8px;">Profile Picture</p>
                    <input type="file" id="avatar-img-input" accept="image/*" style="font-size:0.62rem;margin:0;">
                    <div class="progress-wrap hidden" id="avatar-progress-wrap" style="margin-top:6px;"><div class="progress-bar" id="avatar-progress-bar"></div></div>
                </div>
            </div>

            <div style="margin-bottom:16px;">
                <p style="font-size:0.58rem;font-weight:700;text-transform:uppercase;letter-spacing:1.5px;color:var(--text-muted);margin-bottom:8px;">Cover / Banner Photo</p>
                <input type="file" id="banner-img-input-drawer" accept="image/*" style="font-size:0.62rem;margin-bottom:6px;">
                <div class="progress-wrap hidden" id="banner-progress-wrap"><div class="progress-bar" id="banner-progress-bar"></div></div>
            </div>

            <input type="text" id="profile-name-input" placeholder="Display Name *">
            <textarea id="profile-bio-input" placeholder="Bio â€” tell people about your art..." style="height:100px;resize:vertical;"></textarea>
            <button onclick="saveProfile()" style="width:100%;padding:14px;">Save Profile âœ¦</button>
        </div>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     ROW 3 â€” FOOTER (always at page bottom)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<footer>
    <div class="est-tag">EST. 2026<br>BATANGAS. PH</div>
    <div class="footer-copy">
        DESIGNED BY RENCE CREATE<br>
        Â© ALL RIGHTS RESERVED 2026<br>
        AUTHENTIC QUALITY
    </div>
</footer>


<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     JAVASCRIPT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<script>
    /* â”€â”€ Supabase â”€â”€ */
    const SUPABASE_URL = 'https://wogftjsssxfhktgdfvod.supabase.co';
    const SUPABASE_KEY = 'sb_publishable_9yJg8M-wrRXHMfuDnCtFkA_L3n1Ii36';
    const sb     = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
    const BUCKET = 'gallery-images';

    /* â”€â”€ State â”€â”€ */
    let posts = [], profileData = null;
    let pendingPostUrl = null, pendingAvatarUrl = null, pendingBannerUrl = null;
    let _alertTimer = null;

    /* â”€â”€ Admin check via localStorage â”€â”€
       To enable: localStorage.setItem('adminStatus','true') in console, then refresh.
       To disable: localStorage.setItem('adminStatus','false') */
    const isAdmin = localStorage.getItem('adminStatus') === 'true';

    /* â”€â”€ Init â”€â”€ */
    async function init() {
        setupAdminUI();
        await Promise.all([loadProfile(), loadPosts()]);
    }

    function setupAdminUI() {
        if (isAdmin) {
            document.getElementById('edit-gallery-btn').classList.remove('hidden');
        }
    }

    /* â”€â”€ Toast â”€â”€ */
    function notify(text, icon = 'âœ¨') {
        const box = document.getElementById('g-alert');
        document.getElementById('g-alert-text').innerText = text;
        document.getElementById('g-alert-icon').innerText = icon;
        if (_alertTimer) { clearTimeout(_alertTimer); _alertTimer = null; }
        box.classList.remove('show'); void box.offsetWidth; box.classList.add('show');
        _alertTimer = setTimeout(() => { box.classList.remove('show'); _alertTimer = null; }, 3000);
    }

    /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
       LOAD PROFILE
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    async function loadProfile() {
        const { data, error } = await sb.from('gallery_profile').select('*').eq('id',1).single();

        if (error || !data) {
            document.getElementById('profile-name-display').innerText = 'RENCE CREATE';
            document.getElementById('profile-bio-display').innerText  = 'An independent art studio based in Batangas, PH. â™¡';
            return;
        }
        profileData = data;
        document.getElementById('profile-name-display').innerText = data.name || 'RENCE CREATE';
        document.getElementById('profile-bio-display').innerText  = data.bio  || '';

        if (data.avatar_url) {
            const img = document.getElementById('profile-avatar-img');
            img.src   = data.avatar_url; img.classList.remove('hidden');
            document.getElementById('avatar-placeholder').classList.add('hidden');
            const ep = document.getElementById('avatar-edit-preview');
            ep.src = data.avatar_url; ep.style.display = 'block';
            document.getElementById('avatar-edit-placeholder').style.display = 'none';
            pendingAvatarUrl = data.avatar_url;
        }

        if (data.banner_url) {
            const bImg = document.getElementById('profile-banner-img');
            bImg.src   = data.banner_url; bImg.classList.remove('hidden');
            document.getElementById('profile-banner-placeholder').style.display = 'none';
            pendingBannerUrl = data.banner_url;
        }

        document.getElementById('profile-name-input').value = data.name || '';
        document.getElementById('profile-bio-input').value  = data.bio  || '';
    }

    /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
       LOAD POSTS + tally likes
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    async function loadPosts() {
        const { data, error } = await sb.from('gallery_posts').select('*').order('created_at',{ascending:false});
        if (error) { console.error(error); return; }
        posts = data || [];

        /* Sum likes column (integer, default 0). Falls back to 0 if column absent. */
        const totalLikes = posts.reduce((s, p) => s + (p.likes || 0), 0);
        document.getElementById('like-count').innerText = totalLikes;

        renderGrid();
    }

    /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
       RENDER GRID
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    function renderGrid() {
        const grid = document.getElementById('gallery-grid');
        grid.innerHTML = '';
        document.getElementById('post-count').innerText = posts.length;

        if (posts.length === 0) {
            grid.innerHTML = `<div class="gallery-empty"><h2>No posts yet</h2>
                <p>${isAdmin ? 'Use the admin panel to upload your first artwork.' : 'Check back soon for new work.'}</p></div>`;
            return;
        }

        posts.forEach(post => {
            const cell = document.createElement('div');
            cell.className = 'gallery-cell';
            cell.innerHTML = `
                <img src="${post.image_url}" alt="${post.title}" loading="lazy">
                <div class="gallery-cell-overlay">
                    <div class="cell-title">${post.title}</div>
                    <div class="cell-hint">Tap to view</div>
                </div>
                ${isAdmin ? `<button class="cell-del-btn" onclick="deletePost(event,'${post.id}','${post.image_url}')">âœ•</button>` : ''}
            `;
            cell.addEventListener('click', () => openArtModal(post));
            grid.appendChild(cell);
        });
    }

    /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
       ART MODAL â€” title & description from Supabase data
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    function openArtModal(post) {
        document.getElementById('art-modal-img').src         = post.image_url;
        document.getElementById('art-modal-title').innerText = post.title;
        document.getElementById('art-modal-desc').innerText  = post.description || '';
        document.getElementById('art-modal').classList.remove('hidden');
        document.body.style.overflow = 'hidden';
    }
    function closeArtModal() {
        document.getElementById('art-modal').classList.add('hidden');
        document.body.style.overflow = '';
    }

    /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
       ADMIN DRAWER
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    function openAdminDrawer()  { document.getElementById('admin-drawer').classList.add('open'); }
    function closeAdminDrawer() { document.getElementById('admin-drawer').classList.remove('open'); }
    function switchTab(id, event) {
        document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));
        document.querySelectorAll('.drawer-tab').forEach(t => t.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        if (event && event.target) event.target.classList.add('active');
    }

    /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
       STORAGE UPLOAD
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    async function uploadToStorage(file, folder, barId, wrapId, statusId) {
        const wrap   = document.getElementById(wrapId);
        const bar    = document.getElementById(barId);
        const status = statusId ? document.getElementById(statusId) : null;
        wrap.classList.remove('hidden');
        if (status) status.classList.remove('hidden');
        bar.style.width = '10%';

        const fileName = `${folder}/${Date.now()}-${file.name.replace(/\s+/g,'_')}`;
        const { data, error } = await sb.storage.from(BUCKET).upload(fileName, file, {cacheControl:'3600',upsert:false});

        if (error) {
            console.error('Upload error:', error);
            wrap.classList.add('hidden');
            if (status) status.classList.add('hidden');
            notify('Upload failed: ' + error.message, 'âŒ');
            return null;
        }
        bar.style.width = '100%';
        const { data: urlData } = sb.storage.from(BUCKET).getPublicUrl(data.path);
        setTimeout(() => { wrap.classList.add('hidden'); if (status) status.classList.add('hidden'); bar.style.width='0%'; }, 600);
        return urlData.publicUrl;
    }

    /* File input handlers */
    document.getElementById('post-img-input').addEventListener('change', async function() {
        const file = this.files[0]; if (!file) return;
        new FileReader().readAsDataURL(file);
        const r = new FileReader();
        r.onload = e => { document.getElementById('post-preview').innerHTML = `<img src="${e.target.result}" alt="preview">`; };
        r.readAsDataURL(file);
        const url = await uploadToStorage(file,'posts','post-progress-bar','post-progress-wrap','post-upload-status');
        if (url) { pendingPostUrl = url; notify('Image uploaded!','ğŸ–¼ï¸'); }
        this.value = '';
    });

    document.getElementById('avatar-img-input').addEventListener('change', async function() {
        const file = this.files[0]; if (!file) return;
        const r = new FileReader();
        r.onload = e => {
            const ep = document.getElementById('avatar-edit-preview');
            ep.src = e.target.result; ep.style.display = 'block';
            document.getElementById('avatar-edit-placeholder').style.display = 'none';
        };
        r.readAsDataURL(file);
        const url = await uploadToStorage(file,'avatars','avatar-progress-bar','avatar-progress-wrap',null);
        if (url) { pendingAvatarUrl = url; notify('Avatar uploaded!','ğŸ–¼ï¸'); }
        this.value = '';
    });

    document.getElementById('banner-img-input').addEventListener('change', async function() {
        const file = this.files[0]; if (!file) return; await handleBannerUpload(file); this.value='';
    });
    document.getElementById('banner-img-input-drawer').addEventListener('change', async function() {
        const file = this.files[0]; if (!file) return; await handleBannerUpload(file); this.value='';
    });

    async function handleBannerUpload(file) {
        const r = new FileReader();
        r.onload = e => {
            const bImg = document.getElementById('profile-banner-img');
            bImg.src = e.target.result; bImg.classList.remove('hidden');
            document.getElementById('profile-banner-placeholder').style.display = 'none';
        };
        r.readAsDataURL(file);
        const url = await uploadToStorage(file,'banners','banner-progress-bar','banner-progress-wrap',null);
        if (url) { pendingBannerUrl = url; notify('Banner uploaded!','ğŸ–¼ï¸'); }
    }

    /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
       SUBMIT / DELETE / SAVE PROFILE
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    async function submitPost() {
        const title = document.getElementById('post-title').value.trim();
        const desc  = document.getElementById('post-desc').value.trim();
        if (!title)          { notify('Please enter a title.','âš ï¸'); return; }
        if (!pendingPostUrl) { notify('Please upload an image first.','âš ï¸'); return; }

        const { data, error } = await sb.from('gallery_posts').insert([{image_url:pendingPostUrl,title,description:desc}]).select().single();
        if (error) { notify('Save failed: '+error.message,'âŒ'); return; }

        document.getElementById('post-title').value='';
        document.getElementById('post-desc').value='';
        document.getElementById('post-preview').innerHTML='<span class="preview-label">Image Preview</span>';
        pendingPostUrl = null;
        posts.unshift(data); renderGrid(); closeAdminDrawer(); notify('Post published!','âœ¦');
    }

    async function deletePost(event, postId, imageUrl) {
        event.stopPropagation();
        if (!confirm('Delete this post? This cannot be undone.')) return;
        const { error: dbErr } = await sb.from('gallery_posts').delete().eq('id',postId);
        if (dbErr) { notify('Delete failed: '+dbErr.message,'âŒ'); return; }
        try {
            const pathStart = imageUrl.indexOf(`/${BUCKET}/`)+`/${BUCKET}/`.length;
            await sb.storage.from(BUCKET).remove([imageUrl.substring(pathStart)]);
        } catch(e) { console.warn('Could not delete file:',e); }
        posts = posts.filter(p => String(p.id) !== String(postId));
        renderGrid(); notify('Post deleted.','ğŸ—‘ï¸');
    }

    async function saveProfile() {
        const name = document.getElementById('profile-name-input').value.trim();
        const bio  = document.getElementById('profile-bio-input').value.trim();
        if (!name) { notify('Please enter a display name.','âš ï¸'); return; }

        const payload = {
            id:1, name, bio,
            avatar_url: pendingAvatarUrl || profileData?.avatar_url || null,
            banner_url: pendingBannerUrl || profileData?.banner_url || null
        };
        const { error } = await sb.from('gallery_profile').upsert(payload);
        if (error) { notify('Save failed: '+error.message,'âŒ'); return; }

        document.getElementById('profile-name-display').innerText = name;
        document.getElementById('profile-bio-display').innerText  = bio;

        if (payload.avatar_url) {
            const img = document.getElementById('profile-avatar-img');
            img.src = payload.avatar_url; img.classList.remove('hidden');
            document.getElementById('avatar-placeholder').classList.add('hidden');
        }
        if (payload.banner_url) {
            const bImg = document.getElementById('profile-banner-img');
            bImg.src = payload.banner_url; bImg.classList.remove('hidden');
            document.getElementById('profile-banner-placeholder').style.display = 'none';
        }
        profileData = payload; closeAdminDrawer(); notify('Profile saved!','ğŸ’¾');
    }

    /* â”€â”€ ESC + backdrop close â”€â”€ */
    document.addEventListener('keydown', e => { if (e.key==='Escape') { closeArtModal(); closeAdminDrawer(); }});
    document.getElementById('art-modal').addEventListener('click', function(e) { if (e.target===this) closeArtModal(); });

    init();
</script>
</body>
</html>
